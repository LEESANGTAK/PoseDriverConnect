<!doctype html>
<html class="no-js" lang="en" data-content_root="">
  <head><meta charset="utf-8"/>
    <meta name="viewport" content="width=device-width,initial-scale=1"/>
    <meta name="color-scheme" content="light dark"><link rel="index" title="Index" href="../../../genindex.html" /><link rel="search" title="Search" href="../../../search.html" />

    <!-- Generated with Sphinx 6.1.3 and Furo 2023.09.10 -->
        <title>epic_pose_wrangler.v2.main - Pose Driver Connect Documentation</title>
      <link rel="stylesheet" type="text/css" href="../../../_static/pygments.css" />
    <link rel="stylesheet" type="text/css" href="../../../_static/styles/furo.css?digest=369552022d0b975c8e74270ce6eabe0fb7978f24" />
    <link rel="stylesheet" type="text/css" href="../../../_static/styles/furo-extensions.css?digest=30d1aed668e5c3a91c3e3bf6a60b675221979f0e" />
    
    


<style>
  body {
    --color-code-background: #f8f8f8;
  --color-code-foreground: black;
  
  }
  @media not print {
    body[data-theme="dark"] {
      --color-code-background: #202020;
  --color-code-foreground: #d0d0d0;
  
    }
    @media (prefers-color-scheme: dark) {
      body:not([data-theme="light"]) {
        --color-code-background: #202020;
  --color-code-foreground: #d0d0d0;
  
      }
    }
  }
</style></head>
  <body>
    
    <script>
      document.body.dataset.theme = localStorage.getItem("theme") || "auto";
    </script>
    

<svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
  <symbol id="svg-toc" viewBox="0 0 24 24">
    <title>Contents</title>
    <svg stroke="currentColor" fill="currentColor" stroke-width="0" viewBox="0 0 1024 1024">
      <path d="M408 442h480c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8H408c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8zm-8 204c0 4.4 3.6 8 8 8h480c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8H408c-4.4 0-8 3.6-8 8v56zm504-486H120c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zm0 632H120c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zM115.4 518.9L271.7 642c5.8 4.6 14.4.5 14.4-6.9V388.9c0-7.4-8.5-11.5-14.4-6.9L115.4 505.1a8.74 8.74 0 0 0 0 13.8z"/>
    </svg>
  </symbol>
  <symbol id="svg-menu" viewBox="0 0 24 24">
    <title>Menu</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather-menu">
      <line x1="3" y1="12" x2="21" y2="12"></line>
      <line x1="3" y1="6" x2="21" y2="6"></line>
      <line x1="3" y1="18" x2="21" y2="18"></line>
    </svg>
  </symbol>
  <symbol id="svg-arrow-right" viewBox="0 0 24 24">
    <title>Expand</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather-chevron-right">
      <polyline points="9 18 15 12 9 6"></polyline>
    </svg>
  </symbol>
  <symbol id="svg-sun" viewBox="0 0 24 24">
    <title>Light mode</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" class="feather-sun">
      <circle cx="12" cy="12" r="5"></circle>
      <line x1="12" y1="1" x2="12" y2="3"></line>
      <line x1="12" y1="21" x2="12" y2="23"></line>
      <line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line>
      <line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line>
      <line x1="1" y1="12" x2="3" y2="12"></line>
      <line x1="21" y1="12" x2="23" y2="12"></line>
      <line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line>
      <line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line>
    </svg>
  </symbol>
  <symbol id="svg-moon" viewBox="0 0 24 24">
    <title>Dark mode</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" class="icon-tabler-moon">
      <path stroke="none" d="M0 0h24v24H0z" fill="none" />
      <path d="M12 3c.132 0 .263 0 .393 0a7.5 7.5 0 0 0 7.92 12.446a9 9 0 1 1 -8.313 -12.454z" />
    </svg>
  </symbol>
  <symbol id="svg-sun-half" viewBox="0 0 24 24">
    <title>Auto light/dark mode</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" class="icon-tabler-shadow">
      <path stroke="none" d="M0 0h24v24H0z" fill="none"/>
      <circle cx="12" cy="12" r="9" />
      <path d="M13 12h5" />
      <path d="M13 15h4" />
      <path d="M13 18h1" />
      <path d="M13 9h4" />
      <path d="M13 6h1" />
    </svg>
  </symbol>
</svg>

<input type="checkbox" class="sidebar-toggle" name="__navigation" id="__navigation">
<input type="checkbox" class="sidebar-toggle" name="__toc" id="__toc">
<label class="overlay sidebar-overlay" for="__navigation">
  <div class="visually-hidden">Hide navigation sidebar</div>
</label>
<label class="overlay toc-overlay" for="__toc">
  <div class="visually-hidden">Hide table of contents sidebar</div>
</label>



<div class="page">
  <header class="mobile-header">
    <div class="header-left">
      <label class="nav-overlay-icon" for="__navigation">
        <div class="visually-hidden">Toggle site navigation sidebar</div>
        <i class="icon"><svg><use href="#svg-menu"></use></svg></i>
      </label>
    </div>
    <div class="header-center">
      <a href="../../../index.html"><div class="brand">Pose Driver Connect Documentation</div></a>
    </div>
    <div class="header-right">
      <div class="theme-toggle-container theme-toggle-header">
        <button class="theme-toggle">
          <div class="visually-hidden">Toggle Light / Dark / Auto color theme</div>
          <svg class="theme-icon-when-auto"><use href="#svg-sun-half"></use></svg>
          <svg class="theme-icon-when-dark"><use href="#svg-moon"></use></svg>
          <svg class="theme-icon-when-light"><use href="#svg-sun"></use></svg>
        </button>
      </div>
      <label class="toc-overlay-icon toc-header-icon no-toc" for="__toc">
        <div class="visually-hidden">Toggle table of contents sidebar</div>
        <i class="icon"><svg><use href="#svg-toc"></use></svg></i>
      </label>
    </div>
  </header>
  <aside class="sidebar-drawer">
    <div class="sidebar-container">
      
      <div class="sidebar-sticky"><a class="sidebar-brand" href="../../../index.html">
  
  <div class="sidebar-logo-container">
    <img class="sidebar-logo" src="../../../_static/epic.png" alt="Logo"/>
  </div>
  
  <span class="sidebar-brand-text">Pose Driver Connect Documentation</span>
  
</a><form class="sidebar-search-container" method="get" action="../../../search.html" role="search">
  <input class="sidebar-search" placeholder="Search" name="q" aria-label="Search">
  <input type="hidden" name="check_keywords" value="yes">
  <input type="hidden" name="area" value="default">
</form>
<div id="searchbox"></div><div class="sidebar-scroll"><div class="sidebar-tree">
  <p class="caption" role="heading"><span class="caption-text">Contents:</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../../overview.html">Pose Wrangler Overview</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../upgrading.html">Upgrading to 2.0.0+</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../skeleton_config.html">Skeleton Configs</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../extensions.html">Extensions</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../api.html">API</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../faq.html">FAQ</a></li>
</ul>

</div>
</div>

      </div>
      
    </div>
  </aside>
  <div class="main">
    <div class="content">
      <div class="article-container">
        <a href="#" class="back-to-top muted-link">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24">
            <path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8v12z"></path>
          </svg>
          <span>Back to top</span>
        </a>
        <div class="content-icon-container">
          <div class="theme-toggle-container theme-toggle-content">
            <button class="theme-toggle">
              <div class="visually-hidden">Toggle Light / Dark / Auto color theme</div>
              <svg class="theme-icon-when-auto"><use href="#svg-sun-half"></use></svg>
              <svg class="theme-icon-when-dark"><use href="#svg-moon"></use></svg>
              <svg class="theme-icon-when-light"><use href="#svg-sun"></use></svg>
            </button>
          </div>
          <label class="toc-overlay-icon toc-content-icon no-toc" for="__toc">
            <div class="visually-hidden">Toggle table of contents sidebar</div>
            <i class="icon"><svg><use href="#svg-toc"></use></svg></i>
          </label>
        </div>
        <article role="main">
          <h1>Source code for epic_pose_wrangler.v2.main</h1><div class="highlight"><pre>
<span></span><span class="c1"># Copyright Epic Games, Inc. All Rights Reserved.</span>

<span class="c1"># Built-in</span>
<span class="kn">import</span> <span class="nn">collections</span>
<span class="kn">import</span> <span class="nn">inspect</span>
<span class="kn">import</span> <span class="nn">json</span>
<span class="kn">import</span> <span class="nn">os</span>
<span class="kn">import</span> <span class="nn">sys</span>

<span class="c1"># External</span>
<span class="kn">from</span> <span class="nn">maya.api</span> <span class="kn">import</span> <span class="n">OpenMaya</span> <span class="k">as</span> <span class="n">om</span>

<span class="c1"># Internal</span>
<span class="kn">from</span> <span class="nn">epic_pose_wrangler.log</span> <span class="kn">import</span> <span class="n">LOG</span>
<span class="kn">from</span> <span class="nn">epic_pose_wrangler.model</span> <span class="kn">import</span> <span class="n">settings</span><span class="p">,</span> <span class="n">exceptions</span>
<span class="kn">from</span> <span class="nn">epic_pose_wrangler.model.api</span> <span class="kn">import</span> <span class="n">RBFAPI</span>
<span class="kn">from</span> <span class="nn">epic_pose_wrangler.v2.model</span> <span class="kn">import</span> <span class="n">api</span><span class="p">,</span> <span class="n">base_action</span><span class="p">,</span> <span class="n">base_extension</span><span class="p">,</span> <span class="n">pose_blender</span><span class="p">,</span> <span class="n">context</span><span class="p">,</span> <span class="n">utils</span><span class="p">,</span> <span class="n">serializers</span>
<span class="kn">from</span> <span class="nn">epic_pose_wrangler.v2.model</span> <span class="kn">import</span> <span class="n">exceptions</span> <span class="k">as</span> <span class="n">api_exceptions</span><span class="p">,</span> <span class="n">decorators</span><span class="p">,</span> <span class="n">configs</span><span class="p">,</span> <span class="n">actions</span>
<span class="c1"># Core extensions and actions are imported before the UERBFAPI is defined so that when an instance of the api is created</span>
<span class="c1"># the extensions and actions will automatically be loaded. The same must be done for any custom actions/extensions.</span>
<span class="kn">from</span> <span class="nn">epic_pose_wrangler.v2</span> <span class="kn">import</span> <span class="n">extensions</span>


<div class="viewcode-block" id="UERBFAPI"><a class="viewcode-back" href="../../../api.html#epic_pose_wrangler.v2.main.UERBFAPI">[docs]</a><span class="k">class</span> <span class="nc">UERBFAPI</span><span class="p">(</span><span class="n">RBFAPI</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Main entry point for interacting with the UERBFSolverNode and UEPoseBlenderNode</span>

<span class="sd">    &gt;&gt;&gt; from epic_pose_wrangler.v2 import main</span>
<span class="sd">    &gt;&gt;&gt; rbf_api = main.UERBFAPI(view=False)</span>
<span class="sd">    &gt;&gt;&gt; rbf_api.create_rbf_solver(solver_name=&quot;ExampleSolver&quot;, drivers=[&#39;leg_l&#39;])</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">VERSION</span> <span class="o">=</span> <span class="s2">&quot;2.3.0&quot;</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">view</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">parent</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">file_path</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="nb">super</span><span class="p">(</span><span class="n">UERBFAPI</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="n">view</span><span class="o">=</span><span class="n">view</span><span class="p">,</span> <span class="n">parent</span><span class="o">=</span><span class="n">parent</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">_view</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="c1"># Instantiate a settings manager to restore settings from previous sessions</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_settings_manager</span> <span class="o">=</span> <span class="n">settings</span><span class="o">.</span><span class="n">SettingsManager</span><span class="p">()</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">_config</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">set_config_path</span><span class="p">()</span>

        <span class="c1"># Empty var to store the current solver for convenience so that you don&#39;t have to pass the solver through</span>
        <span class="c1"># every time you call a function</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_current_solver</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="c1"># Empty list to store any core and custom actions used to extend the functionality of PoseWrangler</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_extensions</span> <span class="o">=</span> <span class="p">[]</span>

        <span class="c1"># If view is requested, import and build the UI. We use a local import so that any QtWidget dependencies</span>
        <span class="c1"># won&#39;t be loaded if the user is running from mayapy</span>
        <span class="k">if</span> <span class="n">view</span><span class="p">:</span>
            <span class="kn">from</span> <span class="nn">epic_pose_wrangler.v2.view</span> <span class="kn">import</span> <span class="n">pose_wrangler_window</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_view</span> <span class="o">=</span> <span class="n">pose_wrangler_window</span><span class="o">.</span><span class="n">PoseWranglerWindow</span><span class="p">(</span><span class="n">version</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">VERSION</span><span class="p">)</span>
            <span class="c1"># Connect up the views events to the appropriate functions</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_setup_view_events</span><span class="p">()</span>

        <span class="c1"># Load the contents of the current scene</span>
        <span class="n">LOG</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;Loading PoseWrangler...&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">load</span><span class="p">()</span>
        <span class="c1"># If a file path is specified, deserialize and load it</span>
        <span class="k">if</span> <span class="n">file_path</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">deserialize_from_file</span><span class="p">(</span><span class="n">file_path</span><span class="o">=</span><span class="n">file_path</span><span class="p">)</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">extensions</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        :return: list of pose wrangler extensions currently loaded</span>
<span class="sd">        :rtype: list[pose_wrangler.v2.model.base_extension.PoseWranglerExtension]</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_extensions</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">view</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        :return: reference to the ui QWidget</span>
<span class="sd">        :rtype: QtWidgets.QWidget or None</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_view</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">current_solver</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        :return: reference to the current solver</span>
<span class="sd">        :rtype: api.RBFNode or None</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_current_solver</span>

    <span class="nd">@current_solver</span><span class="o">.</span><span class="n">setter</span>
    <span class="k">def</span> <span class="nf">current_solver</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">solver</span><span class="p">):</span>
        <span class="c1"># If the specified solver is not an RBFNode class, raise exception</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">solver</span><span class="p">,</span> <span class="n">api</span><span class="o">.</span><span class="n">RBFNode</span><span class="p">):</span>
            <span class="k">raise</span> <span class="n">api_exceptions</span><span class="o">.</span><span class="n">InvalidSolverError</span><span class="p">(</span>
                <span class="s2">&quot;Solver is not a valid </span><span class="si">{node_type}</span><span class="s2"> node&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">node_type</span><span class="o">=</span><span class="n">api</span><span class="o">.</span><span class="n">RBFNode</span><span class="p">)</span>
            <span class="p">)</span>
        <span class="c1"># Set the current solver</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_current_solver</span> <span class="o">=</span> <span class="n">solver</span>
        <span class="n">solvers</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">rbf_solvers</span>
        <span class="k">for</span> <span class="n">action</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_extensions</span><span class="p">:</span>
            <span class="n">action</span><span class="o">.</span><span class="n">on_context_changed</span><span class="p">(</span>
                <span class="n">context</span><span class="o">.</span><span class="n">PoseWranglerContext</span><span class="p">(</span><span class="n">current_solver</span><span class="o">=</span><span class="n">solver</span><span class="p">,</span> <span class="n">solvers</span><span class="o">=</span><span class="n">solvers</span><span class="p">)</span>
            <span class="p">)</span>
        <span class="c1"># If we are displaying the view, update it with the current selection</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_view</span><span class="p">:</span>
            <span class="c1"># Generate a kwarg dict.</span>
            <span class="n">kwargs</span> <span class="o">=</span> <span class="p">{</span>
                <span class="s2">&quot;solver&quot;</span><span class="p">:</span> <span class="n">solver</span><span class="p">,</span>
                <span class="c1"># We want to store a reference to the MObject in case the name of the  node is changed and the</span>
                <span class="c1"># user doesn&#39;t refresh the UI</span>
                <span class="s2">&quot;drivers&quot;</span><span class="p">:</span> <span class="p">{</span><span class="n">driver</span><span class="p">:</span> <span class="n">om</span><span class="o">.</span><span class="n">MGlobal</span><span class="o">.</span><span class="n">getSelectionListByName</span><span class="p">(</span><span class="n">driver</span><span class="p">)</span><span class="o">.</span><span class="n">getDependNode</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span> <span class="k">for</span> <span class="n">driver</span> <span class="ow">in</span>
                            <span class="n">solver</span><span class="o">.</span><span class="n">drivers</span><span class="p">()},</span>
                <span class="c1"># We want to display both the driven transforms and connected blendshapes.</span>
                <span class="c1"># NOTE: Blendshapes will only be found if connected up via this API. For more info see:</span>
                <span class="c1"># self.create_blendshape or self.add_blendshape</span>
                <span class="s2">&quot;driven_transforms&quot;</span><span class="p">:</span> <span class="p">{</span>
                    <span class="s1">&#39;transform&#39;</span><span class="p">:</span> <span class="n">solver</span><span class="o">.</span><span class="n">driven_nodes</span><span class="p">(</span><span class="n">pose_blender</span><span class="o">.</span><span class="n">UEPoseBlenderNode</span><span class="o">.</span><span class="n">node_type</span><span class="p">),</span>
                    <span class="s1">&#39;blendshape&#39;</span><span class="p">:</span> <span class="p">{</span><span class="n">mesh</span><span class="p">:</span> <span class="n">solver</span><span class="o">.</span><span class="n">get_pose_for_blendshape_mesh</span><span class="p">(</span><span class="n">mesh</span><span class="p">)</span> <span class="k">for</span> <span class="n">mesh</span> <span class="ow">in</span>
                                   <span class="n">solver</span><span class="o">.</span><span class="n">driven_nodes</span><span class="p">(</span><span class="nb">type</span><span class="o">=</span><span class="s1">&#39;blendShape&#39;</span><span class="p">)}</span>
                <span class="p">},</span>
                <span class="s2">&quot;poses&quot;</span><span class="p">:</span> <span class="n">solver</span><span class="o">.</span><span class="n">poses</span><span class="p">()</span>
            <span class="p">}</span>
            <span class="c1"># Load the solver settings in the view with the given kwargs</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_view</span><span class="o">.</span><span class="n">load_solver_settings</span><span class="p">(</span><span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">config</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_config</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">mirror_mapping</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        :return: reference to the currently loaded mirror mapping</span>
<span class="sd">        :rtype: mirror_mapping.MirrorMapping object</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_config</span><span class="o">.</span><span class="n">mirror_mapping</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">rbf_solvers</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        :return: list of rbf solvers in the scene</span>
<span class="sd">        :rtype: list</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="n">api</span><span class="o">.</span><span class="n">RBFNode</span><span class="o">.</span><span class="n">find_all</span><span class="p">()</span>

    <span class="c1"># ================================================ Solvers ======================================================= #</span>

<div class="viewcode-block" id="UERBFAPI.create_rbf_solver"><a class="viewcode-back" href="../../../api.html#epic_pose_wrangler.v2.main.UERBFAPI.create_rbf_solver">[docs]</a>    <span class="k">def</span> <span class="nf">create_rbf_solver</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">solver_name</span><span class="p">,</span> <span class="n">drivers</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Create an rbf solver node with the given name and the specified driver transforms</span>

<span class="sd">        :param solver_name: name of the solver node</span>
<span class="sd">        :type solver_name: str</span>
<span class="sd">        :param drivers: list of driver transform node names</span>
<span class="sd">        :type drivers: list</span>
<span class="sd">        :return: RBFNode ref</span>
<span class="sd">        :rtype: api.RBFNode</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="c1"># If no drivers are specified, grab the current selection</span>
        <span class="n">drivers</span> <span class="o">=</span> <span class="n">drivers</span> <span class="ow">or</span> <span class="n">utils</span><span class="o">.</span><span class="n">get_selection</span><span class="p">(</span><span class="n">_type</span><span class="o">=</span><span class="s1">&#39;transform&#39;</span><span class="p">)</span>
        <span class="n">LOG</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot;Creating RBF solver &#39;</span><span class="si">{name}</span><span class="s2">&#39; with drivers: </span><span class="si">{drivers}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="n">solver_name</span><span class="p">,</span> <span class="n">drivers</span><span class="o">=</span><span class="n">drivers</span><span class="p">))</span>
        <span class="c1"># Create the solver</span>
        <span class="n">solver</span> <span class="o">=</span> <span class="n">api</span><span class="o">.</span><span class="n">RBFNode</span><span class="o">.</span><span class="n">create</span><span class="p">(</span><span class="n">solver_name</span><span class="p">)</span>
        <span class="c1"># If drivers have been specified, add them</span>
        <span class="k">if</span> <span class="n">drivers</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">add_drivers</span><span class="p">(</span><span class="n">drivers</span><span class="o">=</span><span class="n">drivers</span><span class="p">,</span> <span class="n">solver</span><span class="o">=</span><span class="n">solver</span><span class="p">)</span>
        <span class="c1"># If we are in UI mode, add the solver to the view</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_view</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_view</span><span class="o">.</span><span class="n">add_rbf_solver</span><span class="p">(</span><span class="n">solver</span><span class="p">)</span>
        <span class="c1"># Set the current solver</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">current_solver</span> <span class="o">=</span> <span class="n">solver</span>
        <span class="c1"># Set the current solver to edit mode</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">edit_solver</span><span class="p">(</span><span class="n">edit</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">solver</span><span class="o">=</span><span class="n">solver</span><span class="p">)</span>
        <span class="c1"># Return the new solver</span>
        <span class="k">return</span> <span class="n">solver</span></div>

<div class="viewcode-block" id="UERBFAPI.delete_rbf_solver"><a class="viewcode-back" href="../../../api.html#epic_pose_wrangler.v2.main.UERBFAPI.delete_rbf_solver">[docs]</a>    <span class="k">def</span> <span class="nf">delete_rbf_solver</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">solver</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Delete the specified solver</span>

<span class="sd">        :param solver:  solver reference</span>
<span class="sd">        :type solver: api.RBFNode</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="c1"># If no solver is specified, grab the current solver</span>
        <span class="n">solver</span> <span class="o">=</span> <span class="n">solver</span> <span class="ow">or</span> <span class="bp">self</span><span class="o">.</span><span class="n">_current_solver</span>
        <span class="c1"># Delete the solver</span>
        <span class="n">solver</span><span class="o">.</span><span class="n">delete</span><span class="p">()</span>
        <span class="c1"># If we are using the UI, delete the solver</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_view</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_view</span><span class="o">.</span><span class="n">delete_solver</span><span class="p">(</span><span class="n">solver</span><span class="p">)</span>
        <span class="c1"># If the current solver is this solver, set current to None</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_current_solver</span> <span class="o">==</span> <span class="n">solver</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_current_solver</span> <span class="o">=</span> <span class="kc">None</span></div>

<div class="viewcode-block" id="UERBFAPI.edit_solver"><a class="viewcode-back" href="../../../api.html#epic_pose_wrangler.v2.main.UERBFAPI.edit_solver">[docs]</a>    <span class="k">def</span> <span class="nf">edit_solver</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">edit</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">solver</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Edit or finish editing the specified solver. Enables pose creation/driven node changes via the ui</span>

<span class="sd">        :param edit:  set edit mode on or off</span>
<span class="sd">        :type edit: bool</span>
<span class="sd">        :param solver: solver reference</span>
<span class="sd">        :type solver: api.RBFNode</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="c1"># If no solver is specified, grab the current solver</span>
        <span class="n">solver</span> <span class="o">=</span> <span class="n">solver</span> <span class="ow">or</span> <span class="bp">self</span><span class="o">.</span><span class="n">_current_solver</span>
        <span class="c1"># Edit the solver</span>
        <span class="n">solver</span><span class="o">.</span><span class="n">edit_solver</span><span class="p">(</span><span class="n">edit</span><span class="o">=</span><span class="n">edit</span><span class="p">)</span>
        <span class="c1"># If we have a ui, update the edit mode status</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_view</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_view</span><span class="o">.</span><span class="n">edit_solver</span><span class="p">(</span><span class="n">solver</span><span class="o">=</span><span class="n">solver</span><span class="p">,</span> <span class="n">edit</span><span class="o">=</span><span class="n">edit</span><span class="p">)</span>
        <span class="n">LOG</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot;Setting edit status: </span><span class="si">{status}</span><span class="s2"> for solver: </span><span class="si">{solver}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">status</span><span class="o">=</span><span class="n">edit</span><span class="p">,</span> <span class="n">solver</span><span class="o">=</span><span class="n">solver</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">current_solver</span> <span class="o">=</span> <span class="n">solver</span>
        <span class="c1"># Return a context manager if edit is True so that users have the option to automatically finish editing</span>
        <span class="c1"># instead of running edit_solver twice.</span>
        <span class="k">if</span> <span class="n">edit</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">context</span><span class="o">.</span><span class="n">EditSolverContextManager</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">current_solver</span><span class="p">)</span></div>

<div class="viewcode-block" id="UERBFAPI.mirror_rbf_solver"><a class="viewcode-back" href="../../../api.html#epic_pose_wrangler.v2.main.UERBFAPI.mirror_rbf_solver">[docs]</a>    <span class="k">def</span> <span class="nf">mirror_rbf_solver</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">solver</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Mirror the current solver</span>

<span class="sd">        :param solver: solver reference</span>
<span class="sd">        :type solver: api.RBFNode</span>
<span class="sd">        :return: mirrored solver reference</span>
<span class="sd">        :rtype: api.RBFNode</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="c1"># If no solver is specified, grab the current solver</span>
        <span class="n">solver</span> <span class="o">=</span> <span class="n">solver</span> <span class="ow">or</span> <span class="bp">self</span><span class="o">.</span><span class="n">_current_solver</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">_config</span><span class="o">.</span><span class="n">is_feature_available</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_config</span><span class="o">.</span><span class="n">mirror_mapping</span><span class="p">):</span>
            <span class="k">raise</span> <span class="n">exceptions</span><span class="o">.</span><span class="n">InvalidMirrorMapping</span><span class="p">(</span><span class="s2">&quot;Unable to mirror rbf solver, missing mirror mapping config&quot;</span><span class="p">)</span>

        <span class="n">mirrored_solver</span> <span class="o">=</span> <span class="n">solver</span><span class="o">.</span><span class="n">mirror</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">mirror_mapping</span><span class="p">)</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_view</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_load_view</span><span class="p">()</span>

        <span class="c1"># Set the current solver to the new solver</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">current_solver</span> <span class="o">=</span> <span class="n">mirrored_solver</span>
        <span class="c1"># Return the new solver</span>
        <span class="k">return</span> <span class="n">mirrored_solver</span></div>

<div class="viewcode-block" id="UERBFAPI.get_rbf_solver_by_name"><a class="viewcode-back" href="../../../api.html#epic_pose_wrangler.v2.main.UERBFAPI.get_rbf_solver_by_name">[docs]</a>    <span class="k">def</span> <span class="nf">get_rbf_solver_by_name</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">solver_name</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Searches the scene for an rbf solver with the given name. Case insensitive</span>

<span class="sd">        :param solver_name: Solver node name</span>
<span class="sd">        :type solver_name: str</span>
<span class="sd">        :return: found node or None</span>
<span class="sd">        :rtype: api.RBFNode or None</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">for</span> <span class="n">solver</span> <span class="ow">in</span> <span class="n">api</span><span class="o">.</span><span class="n">RBFNode</span><span class="o">.</span><span class="n">find_all</span><span class="p">():</span>
            <span class="k">if</span> <span class="nb">str</span><span class="p">(</span><span class="n">solver</span><span class="p">)</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span> <span class="o">==</span> <span class="n">solver_name</span><span class="o">.</span><span class="n">lower</span><span class="p">():</span>
                <span class="k">return</span> <span class="n">solver</span></div>

    <span class="c1"># ================================================ Drivers ======================================================= #</span>

<div class="viewcode-block" id="UERBFAPI.add_drivers"><a class="viewcode-back" href="../../../api.html#epic_pose_wrangler.v2.main.UERBFAPI.add_drivers">[docs]</a>    <span class="k">def</span> <span class="nf">add_drivers</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">drivers</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">solver</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Add the specified drivers to the specified solver</span>

<span class="sd">        :param drivers: list of transform nodes</span>
<span class="sd">        :type drivers: list</span>
<span class="sd">        :param solver: solver reference</span>
<span class="sd">        :type solver: api.RBFNode</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="c1"># If no solver is specified, grab the current solver</span>
        <span class="n">solver</span> <span class="o">=</span> <span class="n">solver</span> <span class="ow">or</span> <span class="bp">self</span><span class="o">.</span><span class="n">_current_solver</span>
        <span class="c1"># If we already have more than one pose, we can&#39;t add a new driver (would require manually updating every pose)</span>
        <span class="k">if</span> <span class="n">solver</span><span class="o">.</span><span class="n">num_poses</span><span class="p">()</span> <span class="o">&gt;</span> <span class="mi">1</span><span class="p">:</span>
            <span class="k">raise</span> <span class="n">api_exceptions</span><span class="o">.</span><span class="n">InvalidPoseIndex</span><span class="p">(</span><span class="s2">&quot;Too many poses have been created, unable to add a new driver.&quot;</span><span class="p">)</span>
        <span class="c1"># Check if we have a default pose</span>
        <span class="k">if</span> <span class="n">solver</span><span class="o">.</span><span class="n">has_pose</span><span class="p">(</span><span class="n">pose_name</span><span class="o">=</span><span class="s1">&#39;default&#39;</span><span class="p">):</span>
            <span class="c1"># Delete the current rest pose if found</span>
            <span class="n">solver</span><span class="o">.</span><span class="n">delete_pose</span><span class="p">(</span><span class="n">pose_name</span><span class="o">=</span><span class="s1">&#39;default&#39;</span><span class="p">)</span>
        <span class="c1"># Add new drivers</span>
        <span class="n">solver</span><span class="o">.</span><span class="n">add_driver</span><span class="p">(</span><span class="n">transform_nodes</span><span class="o">=</span><span class="n">drivers</span><span class="p">)</span>
        <span class="c1"># Create the new rest pose with all the drivers</span>
        <span class="n">solver</span><span class="o">.</span><span class="n">add_pose_from_current</span><span class="p">(</span><span class="n">pose_name</span><span class="o">=</span><span class="s1">&#39;default&#39;</span><span class="p">)</span>
        <span class="c1"># Set the current solver</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">current_solver</span> <span class="o">=</span> <span class="n">solver</span></div>

<div class="viewcode-block" id="UERBFAPI.remove_drivers"><a class="viewcode-back" href="../../../api.html#epic_pose_wrangler.v2.main.UERBFAPI.remove_drivers">[docs]</a>    <span class="k">def</span> <span class="nf">remove_drivers</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">drivers</span><span class="p">,</span> <span class="n">solver</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Remove the specified drivers from the specified solver</span>

<span class="sd">        :param drivers: list of driver transform nodes</span>
<span class="sd">        :type drivers: list</span>
<span class="sd">        :param solver: solver reference</span>
<span class="sd">        :type solver: api.RBFNode</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="c1"># Get the solver if it hasn&#39;t been specified</span>
        <span class="n">solver</span> <span class="o">=</span> <span class="n">solver</span> <span class="ow">or</span> <span class="bp">self</span><span class="o">.</span><span class="n">_current_solver</span>
        <span class="c1"># Remove the drivers from the solver</span>
        <span class="n">solver</span><span class="o">.</span><span class="n">remove_drivers</span><span class="p">(</span><span class="n">drivers</span><span class="p">)</span>
        <span class="c1"># Have to re-wrap solver due to a bug with targets array indexing</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">current_solver</span> <span class="o">=</span> <span class="n">api</span><span class="o">.</span><span class="n">RBFNode</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">solver</span><span class="p">))</span></div>

    <span class="c1"># ================================================ Driven ======================================================== #</span>

<div class="viewcode-block" id="UERBFAPI.add_driven_transforms"><a class="viewcode-back" href="../../../api.html#epic_pose_wrangler.v2.main.UERBFAPI.add_driven_transforms">[docs]</a>    <span class="k">def</span> <span class="nf">add_driven_transforms</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">driven_nodes</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">solver</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">edit</span><span class="o">=</span><span class="kc">False</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Add driven transforms to the specified solver</span>

<span class="sd">        :param driven_nodes: list of transform nodes</span>
<span class="sd">        :type driven_nodes: list</span>
<span class="sd">        :param solver: solver reference</span>
<span class="sd">        :type solver: api.RBFNode</span>
<span class="sd">        :param edit: should this transform not be connected to the pose blender output upon creation</span>
<span class="sd">        :type edit: bool</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="c1"># Get the solver if it hasn&#39;t been specified</span>
        <span class="n">solver</span> <span class="o">=</span> <span class="n">solver</span> <span class="ow">or</span> <span class="bp">self</span><span class="o">.</span><span class="n">_current_solver</span>
        <span class="n">solver</span><span class="o">.</span><span class="n">add_driven_transforms</span><span class="p">(</span><span class="n">driven_nodes</span><span class="p">,</span> <span class="n">edit</span><span class="o">=</span><span class="n">edit</span><span class="p">)</span>
        <span class="c1"># Update the current solver</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">current_solver</span> <span class="o">=</span> <span class="n">solver</span></div>

<div class="viewcode-block" id="UERBFAPI.remove_driven"><a class="viewcode-back" href="../../../api.html#epic_pose_wrangler.v2.main.UERBFAPI.remove_driven">[docs]</a>    <span class="k">def</span> <span class="nf">remove_driven</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">driven_nodes</span><span class="p">,</span> <span class="n">solver</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Remove driven transforms from the specified solver</span>

<span class="sd">        :param driven_nodes: list of transform nodes</span>
<span class="sd">        :type driven_nodes: list</span>
<span class="sd">        :param solver: solver reference</span>
<span class="sd">        :type solver: api.RBFNode</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="c1"># Get the solver if it hasn&#39;t been specified</span>
        <span class="n">solver</span> <span class="o">=</span> <span class="n">solver</span> <span class="ow">or</span> <span class="bp">self</span><span class="o">.</span><span class="n">_current_solver</span>
        <span class="n">solver</span><span class="o">.</span><span class="n">remove_driven_transforms</span><span class="p">(</span><span class="n">driven_nodes</span><span class="p">)</span>
        <span class="c1"># Update the current solver</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">current_solver</span> <span class="o">=</span> <span class="n">solver</span></div>

    <span class="c1"># ============================================== Blendshapes ===================================================== #</span>

<div class="viewcode-block" id="UERBFAPI.add_blendshape"><a class="viewcode-back" href="../../../api.html#epic_pose_wrangler.v2.main.UERBFAPI.add_blendshape">[docs]</a>    <span class="k">def</span> <span class="nf">add_blendshape</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">pose_name</span><span class="p">,</span> <span class="n">mesh_name</span><span class="p">,</span> <span class="n">base_mesh</span><span class="p">,</span> <span class="n">solver</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Add an existing blendshape for the current pose</span>

<span class="sd">        :param pose_name: name of the pose the blendshape is associated with</span>
<span class="sd">        :type pose_name: str</span>
<span class="sd">        :param mesh_name: name of the existing blendshape mesh</span>
<span class="sd">        :type mesh_name: str</span>
<span class="sd">        :param base_mesh: name of the mesh the blendshape mesh is derived from</span>
<span class="sd">        :type base_mesh: str</span>
<span class="sd">        :param solver: solver reference</span>
<span class="sd">        :type solver: api.RBFNode</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="c1"># Ensure we have a solver</span>
        <span class="n">solver</span> <span class="o">=</span> <span class="n">solver</span> <span class="ow">or</span> <span class="bp">self</span><span class="o">.</span><span class="n">_current_solver</span>
        <span class="c1"># Add the blendshape</span>
        <span class="n">solver</span><span class="o">.</span><span class="n">add_existing_blendshape</span><span class="p">(</span><span class="n">pose_name</span><span class="p">,</span> <span class="n">mesh_name</span><span class="p">,</span> <span class="n">base_mesh</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">current_solver</span> <span class="o">=</span> <span class="n">solver</span></div>

<div class="viewcode-block" id="UERBFAPI.create_blendshape"><a class="viewcode-back" href="../../../api.html#epic_pose_wrangler.v2.main.UERBFAPI.create_blendshape">[docs]</a>    <span class="k">def</span> <span class="nf">create_blendshape</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">pose_name</span><span class="p">,</span> <span class="n">mesh_name</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">edit</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">solver</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Create a new blendshape for the given pose and mesh</span>

<span class="sd">        :param pose_name: name of the pose to create this blendshape for</span>
<span class="sd">        :type pose_name: str</span>
<span class="sd">        :param mesh_name: name of the mesh to create the blendshape from</span>
<span class="sd">        :type mesh_name: str</span>
<span class="sd">        :param edit: should this blendshape be edited straight away</span>
<span class="sd">        :type edit: bool</span>
<span class="sd">        :param solver: solver reference</span>
<span class="sd">        :type solver: api.RBFNode</span>
<span class="sd">        :return: name of the newly created blendshape mesh</span>
<span class="sd">        :rtype: str</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="c1"># Ensure we have a solver</span>
        <span class="n">solver</span> <span class="o">=</span> <span class="n">solver</span> <span class="ow">or</span> <span class="bp">self</span><span class="o">.</span><span class="n">_current_solver</span>
        <span class="c1"># Create a new blendshape mesh at the specified pose</span>
        <span class="n">blendshape_mesh_name</span> <span class="o">=</span> <span class="n">solver</span><span class="o">.</span><span class="n">create_blendshape</span><span class="p">(</span><span class="n">pose_name</span><span class="p">,</span> <span class="n">mesh_name</span><span class="p">)</span>
        <span class="c1"># If we are editing, change the mode</span>
        <span class="k">if</span> <span class="n">edit</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">edit_blendshape</span><span class="p">(</span><span class="n">pose_name</span><span class="o">=</span><span class="n">pose_name</span><span class="p">,</span> <span class="n">edit</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">solver</span><span class="o">=</span><span class="n">solver</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="c1"># If we aren&#39;t editing, update the current solver</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">current_solver</span> <span class="o">=</span> <span class="n">solver</span>
        <span class="c1"># Return the name of the new blendshape mesh</span>
        <span class="k">return</span> <span class="n">blendshape_mesh_name</span></div>

<div class="viewcode-block" id="UERBFAPI.delete_blendshape"><a class="viewcode-back" href="../../../api.html#epic_pose_wrangler.v2.main.UERBFAPI.delete_blendshape">[docs]</a>    <span class="k">def</span> <span class="nf">delete_blendshape</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">pose_name</span><span class="p">,</span> <span class="n">solver</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Delete the blendshape associated with the specified pose</span>

<span class="sd">        :param pose_name: name of the pose to delete blendshapes for</span>
<span class="sd">        :type pose_name: str</span>
<span class="sd">        :param solver: solver reference</span>
<span class="sd">        :type solver: api.RBFNode</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="c1"># Ensure we have a solver</span>
        <span class="n">solver</span> <span class="o">=</span> <span class="n">solver</span> <span class="ow">or</span> <span class="bp">self</span><span class="o">.</span><span class="n">_current_solver</span>
        <span class="c1"># Delete the blendshape mesh at the specified pose</span>
        <span class="n">solver</span><span class="o">.</span><span class="n">delete_blendshape</span><span class="p">(</span><span class="n">pose_name</span><span class="p">,</span> <span class="n">delete_mesh</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
        <span class="c1"># Set the current solver</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">current_solver</span> <span class="o">=</span> <span class="n">solver</span></div>

<div class="viewcode-block" id="UERBFAPI.edit_blendshape"><a class="viewcode-back" href="../../../api.html#epic_pose_wrangler.v2.main.UERBFAPI.edit_blendshape">[docs]</a>    <span class="k">def</span> <span class="nf">edit_blendshape</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">pose_name</span><span class="p">,</span> <span class="n">edit</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">solver</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Edit or finish editing the blendshape associated with the specified pose name</span>

<span class="sd">        :param pose_name: name of the pose the blendshape is associated with</span>
<span class="sd">        :type pose_name: str</span>
<span class="sd">        :param edit: True = enable editing, False =  finish editing</span>
<span class="sd">        :type edit: bool</span>
<span class="sd">        :param solver: solver reference</span>
<span class="sd">        :type solver: api.RBFNode</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="c1"># Ensure we have a solver</span>
        <span class="n">solver</span> <span class="o">=</span> <span class="n">solver</span> <span class="ow">or</span> <span class="bp">self</span><span class="o">.</span><span class="n">_current_solver</span>
        <span class="c1"># Edit or finish editing the blendshape</span>
        <span class="n">solver</span><span class="o">.</span><span class="n">edit_blendshape</span><span class="p">(</span><span class="n">pose_name</span><span class="p">,</span> <span class="n">edit</span><span class="o">=</span><span class="n">edit</span><span class="p">)</span>
        <span class="c1"># Set the current solver</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">current_solver</span> <span class="o">=</span> <span class="n">solver</span>
        <span class="c1"># If we have a ui, update the blendshapes status</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_view</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_view</span><span class="o">.</span><span class="n">edit_blendshape</span><span class="p">(</span><span class="n">pose_name</span><span class="p">,</span> <span class="n">edit</span><span class="o">=</span><span class="n">edit</span><span class="p">)</span></div>

<div class="viewcode-block" id="UERBFAPI.isolate_blendshape"><a class="viewcode-back" href="../../../api.html#epic_pose_wrangler.v2.main.UERBFAPI.isolate_blendshape">[docs]</a>    <span class="k">def</span> <span class="nf">isolate_blendshape</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">pose_name</span><span class="p">,</span> <span class="n">isolate</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">solver</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Isolate the blendshape associated with the specified pose name, disabling all other blendshapes.</span>

<span class="sd">        :param pose_name: name of the pose the blendshape is associated with</span>
<span class="sd">        :type pose_name: str</span>
<span class="sd">        :param isolate: True = isolate the blendshape, False = reconnect all disconnected blendshapes</span>
<span class="sd">        :type isolate: bool</span>
<span class="sd">        :param solver: solver reference</span>
<span class="sd">        :type solver: api.RBFNode</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="c1"># Ensure we have a solver</span>
        <span class="n">solver</span> <span class="o">=</span> <span class="n">solver</span> <span class="ow">or</span> <span class="bp">self</span><span class="o">.</span><span class="n">_current_solver</span>
        <span class="c1"># Isolate or un-isolate the blendshape</span>
        <span class="n">solver</span><span class="o">.</span><span class="n">isolate_blendshape</span><span class="p">(</span><span class="n">pose_name</span><span class="o">=</span><span class="n">pose_name</span><span class="p">,</span> <span class="n">isolate</span><span class="o">=</span><span class="n">isolate</span><span class="p">)</span>
        <span class="c1"># Set the current solver</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">current_solver</span> <span class="o">=</span> <span class="n">solver</span></div>

    <span class="c1"># ================================================= Poses ======================================================== #</span>

<div class="viewcode-block" id="UERBFAPI.create_pose"><a class="viewcode-back" href="../../../api.html#epic_pose_wrangler.v2.main.UERBFAPI.create_pose">[docs]</a>    <span class="k">def</span> <span class="nf">create_pose</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">pose_name</span><span class="p">,</span> <span class="n">solver</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Create a new pose for the specified solver</span>

<span class="sd">        :param pose_name: name of the new pose</span>
<span class="sd">        :type pose_name: str</span>
<span class="sd">        :param solver: solver reference</span>
<span class="sd">        :type solver: api.RBFNode</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="c1"># Ensure we have a solver</span>
        <span class="n">solver</span> <span class="o">=</span> <span class="n">solver</span> <span class="ow">or</span> <span class="bp">self</span><span class="o">.</span><span class="n">_current_solver</span>
        <span class="c1"># Create a new pose from the current position</span>
        <span class="n">solver</span><span class="o">.</span><span class="n">add_pose_from_current</span><span class="p">(</span><span class="n">pose_name</span><span class="o">=</span><span class="n">pose_name</span><span class="p">)</span>
        <span class="c1"># Set the current solver</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">current_solver</span> <span class="o">=</span> <span class="n">solver</span></div>

<div class="viewcode-block" id="UERBFAPI.delete_pose"><a class="viewcode-back" href="../../../api.html#epic_pose_wrangler.v2.main.UERBFAPI.delete_pose">[docs]</a>    <span class="k">def</span> <span class="nf">delete_pose</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">pose_name</span><span class="p">,</span> <span class="n">solver</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Remove a pose from the given solver</span>

<span class="sd">        :param pose_name: name of the pose to remove</span>
<span class="sd">        :type pose_name: str</span>
<span class="sd">        :param solver: solver reference</span>
<span class="sd">        :type solver: api.RBFNode</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="c1"># Ensure we have a solver</span>
        <span class="n">solver</span> <span class="o">=</span> <span class="n">solver</span> <span class="ow">or</span> <span class="bp">self</span><span class="o">.</span><span class="n">_current_solver</span>
        <span class="c1"># Delete the pose</span>
        <span class="n">solver</span><span class="o">.</span><span class="n">delete_pose</span><span class="p">(</span><span class="n">pose_name</span><span class="p">)</span>
        <span class="c1"># Set the current solver</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">current_solver</span> <span class="o">=</span> <span class="n">solver</span></div>

<div class="viewcode-block" id="UERBFAPI.go_to_pose"><a class="viewcode-back" href="../../../api.html#epic_pose_wrangler.v2.main.UERBFAPI.go_to_pose">[docs]</a>    <span class="k">def</span> <span class="nf">go_to_pose</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">pose_name</span><span class="p">,</span> <span class="n">solver</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Move the driver/driven transforms to the given pose</span>

<span class="sd">        :param pose_name: name of the pose</span>
<span class="sd">        :type pose_name: str</span>
<span class="sd">        :param solver: solver reference</span>
<span class="sd">        :type solver: api.RBFNode</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="c1"># Ensure we have a solver</span>
        <span class="n">solver</span> <span class="o">=</span> <span class="n">solver</span> <span class="ow">or</span> <span class="bp">self</span><span class="o">.</span><span class="n">_current_solver</span>
        <span class="c1"># Go to the pose</span>
        <span class="n">solver</span><span class="o">.</span><span class="n">go_to_pose</span><span class="p">(</span><span class="n">pose_name</span><span class="o">=</span><span class="n">pose_name</span><span class="p">)</span></div>

<div class="viewcode-block" id="UERBFAPI.mirror_pose"><a class="viewcode-back" href="../../../api.html#epic_pose_wrangler.v2.main.UERBFAPI.mirror_pose">[docs]</a>    <span class="k">def</span> <span class="nf">mirror_pose</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">pose_name</span><span class="p">,</span> <span class="n">solver</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Mirror a pose to the mirror of the current solver</span>

<span class="sd">        :param pose_name: name of the pose</span>
<span class="sd">        :type pose_name: str</span>
<span class="sd">        :param solver: solver reference</span>
<span class="sd">        :type solver: api.RBFNode</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="c1"># Ensure we have a solver</span>
        <span class="n">solver</span> <span class="o">=</span> <span class="n">solver</span> <span class="ow">or</span> <span class="bp">self</span><span class="o">.</span><span class="n">_current_solver</span>
        <span class="c1"># Mirror the pose</span>
        <span class="n">solver</span><span class="o">.</span><span class="n">mirror_pose</span><span class="p">(</span><span class="n">pose_name</span><span class="o">=</span><span class="n">pose_name</span><span class="p">,</span> <span class="n">mirror_mapping</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">mirror_mapping</span><span class="p">)</span>
        <span class="c1"># Reload all the solvers</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">load</span><span class="p">()</span>
        <span class="c1"># Set the current solver</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">current_solver</span> <span class="o">=</span> <span class="n">solver</span></div>

<div class="viewcode-block" id="UERBFAPI.mute_pose"><a class="viewcode-back" href="../../../api.html#epic_pose_wrangler.v2.main.UERBFAPI.mute_pose">[docs]</a>    <span class="k">def</span> <span class="nf">mute_pose</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">pose_name</span><span class="p">,</span> <span class="n">mute</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">solver</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Mute or unmute the specified pose, removing all influences of the pose from the solver.</span>
<span class="sd">        NOTE: This will affect the solver radius if automatic radius is enabled.</span>

<span class="sd">        :param pose_name: name of the pose</span>
<span class="sd">        :type pose_name: str</span>
<span class="sd">        :param mute: mute or unmute the pose</span>
<span class="sd">        :type mute: bool</span>
<span class="sd">        :param solver: solver reference</span>
<span class="sd">        :type solver: api.RBFNode</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="c1"># Ensure we have a solver</span>
        <span class="n">solver</span> <span class="o">=</span> <span class="n">solver</span> <span class="ow">or</span> <span class="bp">self</span><span class="o">.</span><span class="n">_current_solver</span>
        <span class="c1"># Mute or unmute the pose</span>
        <span class="n">solver</span><span class="o">.</span><span class="n">mute_pose</span><span class="p">(</span><span class="n">pose_name</span><span class="o">=</span><span class="n">pose_name</span><span class="p">,</span> <span class="n">mute</span><span class="o">=</span><span class="n">mute</span><span class="p">)</span>
        <span class="c1"># Set the current solver</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">current_solver</span> <span class="o">=</span> <span class="n">solver</span></div>

<div class="viewcode-block" id="UERBFAPI.rename_pose"><a class="viewcode-back" href="../../../api.html#epic_pose_wrangler.v2.main.UERBFAPI.rename_pose">[docs]</a>    <span class="k">def</span> <span class="nf">rename_pose</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">pose_name</span><span class="p">,</span> <span class="n">new_pose_name</span><span class="p">,</span> <span class="n">solver</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Rename a pose on the given solver</span>

<span class="sd">        :param pose_name: name of the pose</span>
<span class="sd">        :type pose_name: str</span>
<span class="sd">        :param new_pose_name: new name of the pose</span>
<span class="sd">        :type new_pose_name: str</span>
<span class="sd">        :param solver: solver reference</span>
<span class="sd">        :type solver: api.RBFNode</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="c1"># Ensure we have a solver</span>
        <span class="n">solver</span> <span class="o">=</span> <span class="n">solver</span> <span class="ow">or</span> <span class="bp">self</span><span class="o">.</span><span class="n">_current_solver</span>
        <span class="c1"># Get the current pose index</span>
        <span class="n">pose_index</span> <span class="o">=</span> <span class="n">solver</span><span class="o">.</span><span class="n">pose_index</span><span class="p">(</span><span class="n">pose_name</span><span class="o">=</span><span class="n">pose_name</span><span class="p">)</span>
        <span class="c1"># Rename the pose at the given index</span>
        <span class="n">solver</span><span class="o">.</span><span class="n">rename_pose</span><span class="p">(</span><span class="n">pose_index</span><span class="o">=</span><span class="n">pose_index</span><span class="p">,</span> <span class="n">pose_name</span><span class="o">=</span><span class="n">new_pose_name</span><span class="p">)</span>
        <span class="c1"># Update the current solver</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">current_solver</span> <span class="o">=</span> <span class="n">solver</span></div>

<div class="viewcode-block" id="UERBFAPI.update_pose"><a class="viewcode-back" href="../../../api.html#epic_pose_wrangler.v2.main.UERBFAPI.update_pose">[docs]</a>    <span class="k">def</span> <span class="nf">update_pose</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">pose_name</span><span class="p">,</span> <span class="n">solver</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Update the pose for the given solver</span>

<span class="sd">        :param pose_name: name of the pose to update</span>
<span class="sd">        :type pose_name: str</span>
<span class="sd">        :param solver: solver reference</span>
<span class="sd">        :type solver: api.RBFNode</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="c1"># Ensure we have a solver</span>
        <span class="n">solver</span> <span class="o">=</span> <span class="n">solver</span> <span class="ow">or</span> <span class="bp">self</span><span class="o">.</span><span class="n">_current_solver</span>
        <span class="c1"># Update the pose with the current driver/driven positions</span>
        <span class="n">solver</span><span class="o">.</span><span class="n">add_pose_from_current</span><span class="p">(</span><span class="n">pose_name</span><span class="p">,</span> <span class="n">update</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
        <span class="n">LOG</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;Updated </span><span class="si">{pose_name}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">pose_name</span><span class="o">=</span><span class="n">pose_name</span><span class="p">))</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">current_solver</span> <span class="o">=</span> <span class="n">solver</span></div>

    <span class="c1"># ================================================== IO ========================================================== #</span>

<div class="viewcode-block" id="UERBFAPI.deserialize_from_file"><a class="viewcode-back" href="../../../api.html#epic_pose_wrangler.v2.main.UERBFAPI.deserialize_from_file">[docs]</a>    <span class="k">def</span> <span class="nf">deserialize_from_file</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">file_path</span><span class="p">,</span> <span class="n">solver_names</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Deserialize solvers from a specific file.</span>

<span class="sd">        :param file_path: json file to load</span>
<span class="sd">        :type file_path: str</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="c1"># Check the path exists</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">exists</span><span class="p">(</span><span class="n">file_path</span><span class="p">):</span>
            <span class="k">raise</span> <span class="n">exceptions</span><span class="o">.</span><span class="n">PoseWranglerIOError</span><span class="p">(</span>
                <span class="s2">&quot;Unable to deserialize from </span><span class="si">{file_path}</span><span class="s2">, path does not exist&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">file_path</span><span class="o">=</span><span class="n">file_path</span><span class="p">)</span>
            <span class="p">)</span>
        <span class="k">if</span> <span class="n">solver_names</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">solver_names</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="c1"># Load the json file and deserialize</span>
        <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="n">file_path</span><span class="p">,</span> <span class="s1">&#39;r&#39;</span><span class="p">)</span> <span class="k">as</span> <span class="n">f</span><span class="p">:</span>
            <span class="n">data</span> <span class="o">=</span> <span class="n">json</span><span class="o">.</span><span class="n">loads</span><span class="p">(</span><span class="n">f</span><span class="o">.</span><span class="n">read</span><span class="p">(),</span> <span class="n">object_pairs_hook</span><span class="o">=</span><span class="n">collections</span><span class="o">.</span><span class="n">OrderedDict</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">deserialize</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="n">solver_names</span><span class="o">=</span><span class="n">solver_names</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
        <span class="n">LOG</span><span class="o">.</span><span class="n">info</span><span class="p">(</span>
            <span class="s2">&quot;Successfully loaded solver(s) from </span><span class="si">{file_path}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span>
                <span class="n">file_path</span><span class="o">=</span><span class="n">file_path</span>
            <span class="p">)</span>
        <span class="p">)</span></div>

<div class="viewcode-block" id="UERBFAPI.serialize_to_file"><a class="viewcode-back" href="../../../api.html#epic_pose_wrangler.v2.main.UERBFAPI.serialize_to_file">[docs]</a>    <span class="k">def</span> <span class="nf">serialize_to_file</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">file_path</span><span class="p">,</span> <span class="n">solvers</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Serialize the specified solvers to a file</span>

<span class="sd">        :param file_path: json file to serialize</span>
<span class="sd">        :type file_path: str</span>
<span class="sd">        :param solvers: list of api.RBFNode to serialize</span>
<span class="sd">        :type solvers: list</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="c1"># Check that the directory exists before writing to it</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">exists</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">dirname</span><span class="p">(</span><span class="n">file_path</span><span class="p">)):</span>
            <span class="n">os</span><span class="o">.</span><span class="n">makedirs</span><span class="p">(</span><span class="n">file_path</span><span class="p">)</span>
        <span class="c1"># Dump the serialized data to the json file</span>
        <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="n">file_path</span><span class="p">,</span> <span class="s1">&#39;w&#39;</span><span class="p">)</span> <span class="k">as</span> <span class="n">f</span><span class="p">:</span>
            <span class="n">solvers</span> <span class="o">=</span> <span class="n">solvers</span> <span class="ow">or</span> <span class="bp">self</span><span class="o">.</span><span class="n">rbf_solvers</span>
            <span class="n">data</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">serialize</span><span class="p">(</span><span class="n">solvers</span><span class="o">=</span><span class="n">solvers</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
            <span class="n">LOG</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot;Successfully serialized solvers: </span><span class="si">{solvers}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">solvers</span><span class="o">=</span><span class="nb">list</span><span class="p">(</span><span class="n">data</span><span class="o">.</span><span class="n">keys</span><span class="p">())))</span>

            <span class="n">f</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="n">json</span><span class="o">.</span><span class="n">dumps</span><span class="p">(</span><span class="n">data</span><span class="p">))</span>
            <span class="n">LOG</span><span class="o">.</span><span class="n">info</span><span class="p">(</span>
                <span class="s2">&quot;Successfully exported </span><span class="si">{num_solvers}</span><span class="s2"> solver(s) to </span><span class="si">{file_path}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span>
                    <span class="n">num_solvers</span><span class="o">=</span><span class="nb">len</span><span class="p">(</span><span class="n">solvers</span><span class="p">),</span>
                    <span class="n">file_path</span><span class="o">=</span><span class="n">file_path</span>
                <span class="p">)</span>
            <span class="p">)</span></div>

<div class="viewcode-block" id="UERBFAPI.deserialize"><a class="viewcode-back" href="../../../api.html#epic_pose_wrangler.v2.main.UERBFAPI.deserialize">[docs]</a>    <span class="k">def</span> <span class="nf">deserialize</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">data</span><span class="p">,</span> <span class="n">solver_names</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Deserialize and load the solvers from the data specified</span>

<span class="sd">        :param data: serialized solver data</span>
<span class="sd">        :type data: dict</span>
<span class="sd">        :param solver_names: list of solver names to load from the data</span>
<span class="sd">        :type solver_names: list, optional</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">for</span> <span class="n">serializer</span> <span class="ow">in</span> <span class="n">serializers</span><span class="o">.</span><span class="n">SERIALIZERS</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">serializer</span><span class="o">.</span><span class="n">can_process</span><span class="p">(</span><span class="n">data</span><span class="o">=</span><span class="n">data</span><span class="p">,</span> <span class="n">config</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_config</span><span class="p">):</span>
                <span class="n">serializer</span><span class="o">.</span><span class="n">deserialize</span><span class="p">(</span><span class="n">data</span><span class="o">=</span><span class="n">data</span><span class="p">,</span> <span class="n">solver_names</span><span class="o">=</span><span class="n">solver_names</span><span class="p">,</span> <span class="n">config</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_config</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
                <span class="k">break</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">load</span><span class="p">()</span></div>

<div class="viewcode-block" id="UERBFAPI.serialize"><a class="viewcode-back" href="../../../api.html#epic_pose_wrangler.v2.main.UERBFAPI.serialize">[docs]</a>    <span class="k">def</span> <span class="nf">serialize</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">solvers</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Serialize the specified solvers</span>

<span class="sd">        :param solvers: list of api.RBFNode to serialize</span>
<span class="sd">        :type solvers: list</span>
<span class="sd">        :return: serialized solver data</span>
<span class="sd">        :rtype: dict</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="c1"># Always serialize with the latest solver</span>
        <span class="n">serializer</span> <span class="o">=</span> <span class="n">serializers</span><span class="o">.</span><span class="n">SERIALIZERS</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span>
        <span class="k">return</span> <span class="n">serializer</span><span class="o">.</span><span class="n">serialize</span><span class="p">(</span><span class="n">solvers</span><span class="o">=</span><span class="n">solvers</span><span class="p">,</span> <span class="n">config</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_config</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span></div>

<div class="viewcode-block" id="UERBFAPI.load"><a class="viewcode-back" href="../../../api.html#epic_pose_wrangler.v2.main.UERBFAPI.load">[docs]</a>    <span class="k">def</span> <span class="nf">load</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Load the default pose wrangler settings</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="c1"># Set the mirror mapping from user settings</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">set_config_path</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_load_extensions</span><span class="p">()</span>

        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_view</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_load_view</span><span class="p">()</span></div>

    <span class="c1"># =============================================== Utilities ====================================================== #</span>

<div class="viewcode-block" id="UERBFAPI.get_context"><a class="viewcode-back" href="../../../api.html#epic_pose_wrangler.v2.main.UERBFAPI.get_context">[docs]</a>    <span class="k">def</span> <span class="nf">get_context</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Get the current solver context</span>

<span class="sd">        :return: pose wrangler context containing the current solver and all rbf solvers</span>
<span class="sd">        :rtype: context.PoseWranglerContext</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="n">context</span><span class="o">.</span><span class="n">PoseWranglerContext</span><span class="p">(</span><span class="n">current_solver</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">current_solver</span><span class="p">,</span> <span class="n">solvers</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">rbf_solvers</span><span class="p">)</span></div>

<div class="viewcode-block" id="UERBFAPI.get_ui_context"><a class="viewcode-back" href="../../../api.html#epic_pose_wrangler.v2.main.UERBFAPI.get_ui_context">[docs]</a>    <span class="k">def</span> <span class="nf">get_ui_context</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        If the ui is available, return the ui context</span>

<span class="sd">        :return: ui context containing the current state of the ui</span>
<span class="sd">        :rtype: ui_context.PoseWranglerUIContext or None</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_view</span><span class="p">:</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_view</span><span class="o">.</span><span class="n">get_context</span><span class="p">()</span></div>

<div class="viewcode-block" id="UERBFAPI.get_extension_by_type"><a class="viewcode-back" href="../../../api.html#epic_pose_wrangler.v2.main.UERBFAPI.get_extension_by_type">[docs]</a>    <span class="k">def</span> <span class="nf">get_extension_by_type</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">class_ref</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Get a reference to one of the loaded extensions from a class type</span>

<span class="sd">        :param class_ref: reference to an extension class</span>
<span class="sd">        :type class_ref: base_extension.PoseWranglerExtension</span>
<span class="sd">        :return: reference to a loaded extension if one is loaded</span>
<span class="sd">        :rtype: base_extension.PoseWranglerExtension instance or None</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">extensions</span> <span class="o">=</span> <span class="p">[</span><span class="n">extension</span> <span class="k">for</span> <span class="n">extension</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_extensions</span> <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">extension</span><span class="p">,</span> <span class="n">class_ref</span><span class="p">)]</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">extensions</span><span class="p">:</span>
            <span class="k">return</span>
        <span class="k">return</span> <span class="n">extensions</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span></div>

    <span class="nd">@decorators</span><span class="o">.</span><span class="n">deprecated</span><span class="p">(</span><span class="s2">&quot;set_mirror_mapping(path) has been deprecated in favour of the set_config_path. &quot;</span>
                           <span class="s2">&quot;Please see the documentation for further information on the upgrade process.&quot;</span><span class="p">)</span>
    <span class="k">def</span> <span class="nf">set_mirror_mapping</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">path</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Set the mirror mapping from a file</span>

<span class="sd">        :param path: path to json mirror mapping file</span>
<span class="sd">        :type path: str</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">set_config_path</span><span class="p">(</span><span class="n">path</span><span class="o">=</span><span class="n">path</span><span class="p">)</span>

<div class="viewcode-block" id="UERBFAPI.set_config_path"><a class="viewcode-back" href="../../../api.html#epic_pose_wrangler.v2.main.UERBFAPI.set_config_path">[docs]</a>    <span class="k">def</span> <span class="nf">set_config_path</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">path</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Set the skeleton config from a file</span>

<span class="sd">        :param path: path to json skeleton config file</span>
<span class="sd">        :type path: str</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="c1"># Attempt to get the path from the config file</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">path</span><span class="p">:</span>
            <span class="n">path</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_settings_manager</span><span class="o">.</span><span class="n">get_setting</span><span class="p">(</span><span class="s2">&quot;ConfigFile&quot;</span><span class="p">)</span>
        <span class="c1"># If we are still missing a path, get the path from the old mirror mapping file</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">path</span><span class="p">:</span>
            <span class="n">path</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_settings_manager</span><span class="o">.</span><span class="n">get_setting</span><span class="p">(</span><span class="s2">&quot;MirrorMappingFile&quot;</span><span class="p">)</span>

        <span class="k">if</span> <span class="ow">not</span> <span class="n">path</span> <span class="ow">or</span> <span class="ow">not</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">exists</span><span class="p">(</span><span class="n">path</span><span class="p">):</span>
            <span class="n">LOG</span><span class="o">.</span><span class="n">warning</span><span class="p">(</span><span class="s2">&quot;No valid skeleton config specified, falling back to default UE5 conventions&quot;</span><span class="p">)</span>
            <span class="n">path</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span>
                <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">dirname</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">dirname</span><span class="p">(</span><span class="vm">__file__</span><span class="p">)),</span>
                <span class="s1">&#39;resources&#39;</span><span class="p">,</span>
                <span class="s1">&#39;configs&#39;</span><span class="p">,</span>
                <span class="s1">&#39;ue5.json&#39;</span>
            <span class="p">)</span>

        <span class="c1"># If the path doesn&#39;t exist, raise an exception</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">exists</span><span class="p">(</span><span class="n">path</span><span class="p">):</span>
            <span class="k">raise</span> <span class="n">exceptions</span><span class="o">.</span><span class="n">InvalidSkeletonConfig</span><span class="p">(</span><span class="s2">&quot;Unable to find skeleton config file: </span><span class="si">{file}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">file</span><span class="o">=</span><span class="n">path</span><span class="p">))</span>

        <span class="c1"># Set the new mirror mapping</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_config</span> <span class="o">=</span> <span class="n">configs</span><span class="o">.</span><span class="n">get_config</span><span class="p">(</span><span class="n">file_path</span><span class="o">=</span><span class="n">path</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_settings_manager</span><span class="o">.</span><span class="n">set_setting</span><span class="p">(</span><span class="s2">&quot;ConfigFile&quot;</span><span class="p">,</span> <span class="n">path</span><span class="p">)</span>
        <span class="c1"># If we are using the UI, update the mirror mapping file path</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_view</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_view</span><span class="o">.</span><span class="n">update_skeleton_config_file</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_config</span><span class="o">.</span><span class="n">file_path</span><span class="p">)</span></div>

<div class="viewcode-block" id="UERBFAPI.get_solver_edit_status"><a class="viewcode-back" href="../../../api.html#epic_pose_wrangler.v2.main.UERBFAPI.get_solver_edit_status">[docs]</a>    <span class="k">def</span> <span class="nf">get_solver_edit_status</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">solver</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Check if the current solver is in &#39;Edit&#39; mode</span>

<span class="sd">        :param solver: solver reference</span>
<span class="sd">        :type solver: api.RBFNode</span>
<span class="sd">        :return: True = in edit mode, False = not in edit mode</span>
<span class="sd">        :rtype: bool</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="c1"># Get the solver if it hasn&#39;t been specified</span>
        <span class="n">solver</span> <span class="o">=</span> <span class="n">solver</span> <span class="ow">or</span> <span class="bp">self</span><span class="o">.</span><span class="n">_current_solver</span>
        <span class="k">return</span> <span class="n">solver</span><span class="o">.</span><span class="n">get_solver_edit_status</span><span class="p">()</span></div>

    <span class="k">def</span> <span class="nf">_get_valid_actions</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">ui_context</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Gets the valid actions base on the ui context</span>
<span class="sd">        :param ui_context :type PoseWranglerUIContext: current selection state of the UI</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">_view</span><span class="p">:</span>
            <span class="k">return</span>
        <span class="c1"># Find all the available actions</span>
        <span class="n">found_actions</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="c1"># Iterate through all the modules currently loaded</span>
        <span class="k">for</span> <span class="n">module</span> <span class="ow">in</span> <span class="nb">list</span><span class="p">(</span><span class="n">sys</span><span class="o">.</span><span class="n">modules</span><span class="o">.</span><span class="n">values</span><span class="p">()):</span>
            <span class="k">try</span><span class="p">:</span>
                <span class="c1"># Find all the classes in the module that inherit from BaseAction</span>
                <span class="n">found_actions</span><span class="o">.</span><span class="n">extend</span><span class="p">(</span>
                    <span class="p">[</span><span class="n">obj</span> <span class="k">for</span> <span class="n">name</span><span class="p">,</span> <span class="n">obj</span> <span class="ow">in</span> <span class="n">inspect</span><span class="o">.</span><span class="n">getmembers</span><span class="p">(</span><span class="n">module</span><span class="p">,</span> <span class="n">inspect</span><span class="o">.</span><span class="n">isclass</span><span class="p">)</span> <span class="k">if</span>
                     <span class="nb">issubclass</span><span class="p">(</span>
                         <span class="n">obj</span><span class="p">,</span> <span class="n">base_action</span><span class="o">.</span><span class="n">BaseAction</span>
                     <span class="p">)</span> <span class="ow">and</span> <span class="n">obj</span> <span class="o">!=</span> <span class="n">base_action</span><span class="o">.</span><span class="n">BaseAction</span>
                     <span class="ow">and</span> <span class="n">obj</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">found_actions</span><span class="p">]</span>
                <span class="p">)</span>
            <span class="k">except</span> <span class="ne">ImportError</span><span class="p">:</span>
                <span class="k">continue</span>

        <span class="c1"># Create the actions</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_view</span><span class="o">.</span><span class="n">valid_actions</span> <span class="o">=</span> <span class="p">[</span><span class="n">action</span><span class="p">(</span><span class="n">api</span><span class="o">=</span><span class="bp">self</span><span class="p">)</span> <span class="k">for</span> <span class="n">action</span> <span class="ow">in</span> <span class="n">found_actions</span><span class="p">]</span>

    <span class="k">def</span> <span class="nf">_load_extensions</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Loads any core and custom extensions found in the sys.modules</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="c1"># Find all the available extensions</span>
        <span class="n">found_extensions</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="c1"># Iterate through all the modules currently loaded</span>
        <span class="k">for</span> <span class="n">module</span> <span class="ow">in</span> <span class="nb">list</span><span class="p">(</span><span class="n">sys</span><span class="o">.</span><span class="n">modules</span><span class="o">.</span><span class="n">values</span><span class="p">()):</span>
            <span class="k">try</span><span class="p">:</span>
                <span class="c1"># Find all the classes in the module that inherit from BaseAction</span>
                <span class="n">found_extensions</span><span class="o">.</span><span class="n">extend</span><span class="p">(</span>
                    <span class="p">[</span><span class="n">obj</span> <span class="k">for</span> <span class="n">name</span><span class="p">,</span> <span class="n">obj</span> <span class="ow">in</span> <span class="n">inspect</span><span class="o">.</span><span class="n">getmembers</span><span class="p">(</span><span class="n">module</span><span class="p">,</span> <span class="n">inspect</span><span class="o">.</span><span class="n">isclass</span><span class="p">)</span> <span class="k">if</span>
                     <span class="nb">issubclass</span><span class="p">(</span>
                         <span class="n">obj</span><span class="p">,</span> <span class="n">base_extension</span><span class="o">.</span><span class="n">PoseWranglerExtension</span>
                     <span class="p">)</span> <span class="ow">and</span> <span class="n">obj</span> <span class="o">!=</span> <span class="n">base_extension</span><span class="o">.</span><span class="n">PoseWranglerExtension</span>
                     <span class="ow">and</span> <span class="n">obj</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">found_extensions</span><span class="p">]</span>
                <span class="p">)</span>
            <span class="k">except</span> <span class="ne">ImportError</span><span class="p">:</span>
                <span class="k">continue</span>

        <span class="c1"># Create the extensions</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_extensions</span> <span class="o">=</span> <span class="p">[</span><span class="n">extension</span><span class="p">(</span><span class="n">display_view</span><span class="o">=</span><span class="nb">bool</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_view</span><span class="p">),</span> <span class="n">api</span><span class="o">=</span><span class="bp">self</span><span class="p">)</span> <span class="k">for</span> <span class="n">extension</span> <span class="ow">in</span> <span class="n">found_extensions</span><span class="p">]</span>

        <span class="c1"># If we are using the UI, show the actions</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_view</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_view</span><span class="o">.</span><span class="n">display_extensions</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_extensions</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">_load_view</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Refresh the UI with the latest solvers</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">_view</span><span class="p">:</span>
            <span class="k">return</span>
        <span class="c1"># If we have a ui, clear it before we load fresh data</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_view</span><span class="o">.</span><span class="n">clear</span><span class="p">()</span>
        <span class="c1"># Bool to keep track if we have a solver that has edits to it</span>
        <span class="n">existing_edit</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="c1"># Iterate through all the solvers in the scene</span>
        <span class="k">for</span> <span class="n">solver</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">rbf_solvers</span><span class="p">:</span>
            <span class="c1"># Get the solvers edit status</span>
            <span class="n">edit</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_solver_edit_status</span><span class="p">(</span><span class="n">solver</span><span class="p">)</span>
            <span class="c1"># If we have an existing edit and this solver has also been edited</span>
            <span class="k">if</span> <span class="n">existing_edit</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span> <span class="ow">and</span> <span class="n">edit</span><span class="p">:</span>
                <span class="c1"># Finish editing this solver</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">edit_solver</span><span class="p">(</span><span class="n">edit</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">solver</span><span class="o">=</span><span class="n">solver</span><span class="p">)</span>
                <span class="c1"># Update the edit status accordingly</span>
                <span class="n">edit</span> <span class="o">=</span> <span class="kc">False</span>
            <span class="c1"># Otherwise if no existing edit and we have an edit</span>
            <span class="k">elif</span> <span class="n">edit</span><span class="p">:</span>
                <span class="c1"># Store the existing edit</span>
                <span class="n">existing_edit</span> <span class="o">=</span> <span class="n">solver</span>
            <span class="c1"># Add the solver to the view with its edit status</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_view</span><span class="o">.</span><span class="n">add_rbf_solver</span><span class="p">(</span><span class="n">solver</span><span class="p">,</span> <span class="n">edit</span><span class="o">=</span><span class="n">edit</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">_set_current_solver</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">solver</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        UI Event to update the current solver</span>
<span class="sd">        :param solver :type api.RBFNode: solver reference</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">current_solver</span> <span class="o">=</span> <span class="n">solver</span>

    <span class="c1"># noinspection DuplicatedCode</span>
    <span class="k">def</span> <span class="nf">_setup_view_events</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Connect up all the ui signals to their corresponding functions</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="c1"># Only works if we have a view</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">_view</span><span class="p">:</span>
            <span class="k">return</span>
        <span class="c1"># Connect up all the ui events</span>
        <span class="c1"># Solver Events</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_view</span><span class="o">.</span><span class="n">event_create_solver</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">create_rbf_solver</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_view</span><span class="o">.</span><span class="n">event_delete_solver</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">delete_rbf_solver</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_view</span><span class="o">.</span><span class="n">event_edit_solver</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">edit_solver</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_view</span><span class="o">.</span><span class="n">event_mirror_solver</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">mirror_rbf_solver</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_view</span><span class="o">.</span><span class="n">event_refresh_solvers</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_load_view</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_view</span><span class="o">.</span><span class="n">event_set_current_solver</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_set_current_solver</span><span class="p">)</span>
        <span class="c1"># Driver Events</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_view</span><span class="o">.</span><span class="n">event_add_drivers</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">add_drivers</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_view</span><span class="o">.</span><span class="n">event_remove_drivers</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">remove_drivers</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_view</span><span class="o">.</span><span class="n">event_export_drivers</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">serialize_to_file</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_view</span><span class="o">.</span><span class="n">event_import_drivers</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">deserialize_from_file</span><span class="p">)</span>
        <span class="c1"># Driven Events</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_view</span><span class="o">.</span><span class="n">event_add_driven</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">add_driven_transforms</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_view</span><span class="o">.</span><span class="n">event_remove_driven</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">remove_driven</span><span class="p">)</span>
        <span class="c1"># Pose Events</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_view</span><span class="o">.</span><span class="n">event_add_pose</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">create_pose</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_view</span><span class="o">.</span><span class="n">event_delete_pose</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">delete_pose</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_view</span><span class="o">.</span><span class="n">event_go_to_pose</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">go_to_pose</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_view</span><span class="o">.</span><span class="n">event_mirror_pose</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">mirror_pose</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_view</span><span class="o">.</span><span class="n">event_rename_pose</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">rename_pose</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_view</span><span class="o">.</span><span class="n">event_update_pose</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">update_pose</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_view</span><span class="o">.</span><span class="n">event_mute_pose</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">mute_pose</span><span class="p">)</span>
        <span class="c1"># Blendshape Events</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_view</span><span class="o">.</span><span class="n">event_create_blendshape</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">create_blendshape</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_view</span><span class="o">.</span><span class="n">event_add_blendshape</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">add_blendshape</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_view</span><span class="o">.</span><span class="n">event_edit_blendshape</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">edit_blendshape</span><span class="p">)</span>
        <span class="c1"># Utility Events</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_view</span><span class="o">.</span><span class="n">event_get_valid_actions</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_get_valid_actions</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_view</span><span class="o">.</span><span class="n">event_select</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="n">utils</span><span class="o">.</span><span class="n">set_selection</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_view</span><span class="o">.</span><span class="n">event_set_skeleton_config</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">set_config_path</span><span class="p">)</span></div>


<span class="k">if</span> <span class="vm">__name__</span> <span class="o">==</span> <span class="s1">&#39;__main__&#39;</span><span class="p">:</span>
    <span class="kn">import</span> <span class="nn">ctypes</span>

    <span class="kn">from</span> <span class="nn">PySide2</span> <span class="kn">import</span> <span class="n">QtWidgets</span>

    <span class="n">myappid</span> <span class="o">=</span> <span class="s1">&#39;EpicGames.PoseWrangler&#39;</span>
    <span class="n">ctypes</span><span class="o">.</span><span class="n">windll</span><span class="o">.</span><span class="n">shell32</span><span class="o">.</span><span class="n">SetCurrentProcessExplicitAppUserModelID</span><span class="p">(</span><span class="n">myappid</span><span class="p">)</span>
    <span class="n">app</span> <span class="o">=</span> <span class="n">QtWidgets</span><span class="o">.</span><span class="n">QApplication</span><span class="p">(</span><span class="n">sys</span><span class="o">.</span><span class="n">argv</span><span class="p">)</span>
    <span class="n">tool</span> <span class="o">=</span> <span class="n">UERBFAPI</span><span class="p">(</span><span class="n">view</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
    <span class="n">app</span><span class="o">.</span><span class="n">exec_</span><span class="p">()</span>
</pre></div>
        </article>
      </div>
      <footer>
        
        <div class="related-pages">
          
          
        </div>
        <div class="bottom-of-page">
          <div class="left-details">
            <div class="copyright">
                Copyright &#169; 2023, Epic Games, Inc.
            </div>
            Made with <a href="https://www.sphinx-doc.org/">Sphinx</a> and <a class="muted-link" href="https://pradyunsg.me">@pradyunsg</a>'s
            
            <a href="https://github.com/pradyunsg/furo">Furo</a>
            
          </div>
          <div class="right-details">
            
          </div>
        </div>
        
      </footer>
    </div>
    <aside class="toc-drawer no-toc">
      
      
      
    </aside>
  </div>
</div><script data-url_root="../../../" id="documentation_options" src="../../../_static/documentation_options.js"></script>
    <script src="../../../_static/doctools.js"></script>
    <script src="../../../_static/sphinx_highlight.js"></script>
    <script src="../../../_static/scripts/furo.js"></script>
    </body>
</html>